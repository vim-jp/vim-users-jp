---
layout: post
title: "Hack #59: 分かりやすいKey-mappingsを定義する"
date: 2009-08-19
author: Shougo
---
<p>Key-mappingsを定義する場合、Prefix-keyを決めておいてまとめて定義できると分かり易くなって便利です。ここではPrefix-keyを用いたKey-mappingsについて説明します。</p>

<h2>普通のKey-mappingsの場合</h2>

<p><dd>tをタグジャンプのためのPrefix-keyとしてKey-mappingsを定義する場合、次のようになると思います。</dd></p>

<pre class="prettyprint"><code class="lang-vim">nnoremap tt  &lt;C-]&gt;
nnoremap &lt;silent&gt; tn  :&lt;C-u&gt;tag&lt;CR&gt;
nnoremap &lt;silent&gt; tp  :&lt;C-u&gt;pop&lt;CR&gt;
nnoremap &lt;silent&gt; tl  :&lt;C-u&gt;tags&lt;CR&gt;
</code></pre>

<p>
				しかし、これだとPrefix-keyが分かりにくく、Prefix-keyをTに変更するのも大変です。
</p>

<h2>改良したPrefix-keyのKey-mappings</h2>

<p><dd>次に示すのが、上記のPrefix-keyを改良したものです。</dd></p>

<pre class="prettyprint"><code class="lang-vim">" The prefix key.
nnoremap    [Tag]   &lt;Nop&gt;
nmap    t [Tag]
nnoremap [Tag]t  &lt;C-]&gt;
nnoremap &lt;silent&gt; [Tag]n  :&lt;C-u&gt;tag&lt;CR&gt;
nnoremap &lt;silent&gt; [Tag]p  :&lt;C-u&gt;pop&lt;CR&gt;
nnoremap &lt;silent&gt; [Tag]l  :&lt;C-u&gt;tags&lt;CR&gt;
</code></pre>

<p>
				[Tag]というPrefix-keyを抽象化したものを定義し、tを[Tag]に<code class="lang-vim">nmap</code>でリンクしています。よって、Prefix-keyを変更するときは<code class="lang-vim">nmap t [Tag]</code>を変更するだけで済みます。ちなみに、このように設定しているとKey-mappingが入力途中の場合、Status line上の表示が[Tag]となるので、タグジャンプのキーを入力途中と言うことが分かり易くなります。
</p>

<address class="hack-author">Shougo</address>
