---
layout: post
title: "USSR#1: neocomplcache ソースコード読解会"
date: 2009-12-22
author: 
---
<p>文責: <a href="http://ujihisa.blogspot.com/">ujihisa</a>, <a href="http://vinarian.blogspot.com/">Shougo</a>, <a href="http://codnote.net/">sorah</a></p>

<p>今日は <code>neocomplcache-4.0.3/autoload/neocomplcache.vim</code> を読みました。</p>

<p>勉強会チャットログはこちら: <a href="http://lingr.com/room/vim/archives/2009/12/22">http://lingr.com/room/vim/archives/2009/12/22</a></p>

<p>特にしっかりと読んだ関数:</p>

<ul>
<li><code>function! neocomplcache#enable()</code></li>
<li><code>function! s:complete()</code></li>
<li><code>function! s:integrate_completion(complete_result)</code></li>
</ul>

<p>APIとなる<code>neocomplcache#</code>ではじまる関数群が<code>autoload/neocomplcache.vim</code>の上部にまとめて定義されています。
また、内部で使う関数群が続いて下部にスクリプトローカルで定義されています。</p>

<p>興味深い部分の抜粋:</p>

<pre><code>echo ''
redraw
</code></pre>

<p><code>redraw!</code>だと画面がちらつくので、そういうときはこの二行で、ということだそうです。</p>

<h2>まとめ</h2>

<p>&#8220;neocomplcacheのソースコードは<em>魔界</em>&#8220;</p>

<p>コード自体はすばらしく整理されているものの、
Vim自体とその周囲の問題を解決するために涙が止まらない努力が随所に見られます。</p>

<ul>
<li>ATOK</li>
<li>画面のチラツキ</li>
<li>速度 (skip)</li>
<li>プラグイン</li>
<li>補完の統合</li>
<li>頻度解析</li>
</ul>
