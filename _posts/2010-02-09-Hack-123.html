---
layout: post
title: "Hack #123: VimでSKK日本語入力環境を実現する"
date: 2010-02-09
author: tyru
---
<p>Emacsでは様々な日本語入力のプラグインがあります。<br />
Vimでもkeymapなどの設定をいじれば可能ですが、<br />
あまりkeymapファイルをいじった人は少ないでしょう。<br />
そこでVimプラグインで日本語入力を実現しようと開発された、skk.vimを紹介します。</p>

<h1>概要</h1>

<p>skk.vimはYagi Noriaki氏によって作られたVimで日本語入力を実現するプラグインで、以下のような特徴を持ちます。</p>

<ul>
<li>SKKによる日本語入力を実現する</li>
<li><code>so skk.vim</code>のみで動作する (Windows環境では辞書ファイルのパスが異なるため、別途設定を.vimrcに書く必要があります)</li>
<li>軽い</li>
</ul>

<p>SKKについて簡単に説明すると、形態素解析（文節の区切り）をSKK自身が行わず、<br />
使用者自身が行うように矯正することで、実装が簡単であり、<br />
かつ慣れれば高速で正確なかな漢字変換が行えるInput Methodです。</p>

<p>形態素解析を行わないことで軽い動作を実現し、
かつ自分の意図した変換結果を得られやすいとされています。<br />
詳しくは各自Wikipediaを見るなりググったりしてください。</p>

<h1>導入</h1>

<h2>SKKの辞書を用意する</h2>

<p><a href="http://openlab.ring.gr.jp/skk/wiki/wiki.cgi?page=SKK%BC%AD%BD%F1">ここ</a>からダウンロードするか、Linuxだったら</p>

<pre><code>skkdic skkdic-extra
</code></pre>

<p>のようなパッケージが用意されていればそれをインストールしてください。</p>

<h2>skk.vim インストール</h2>

<p>普通のVimプラグインと違いはありません。<br />
<a href="http://www.vim.org/scripts/script.php?script_id=1589">www.vim.org</a>から最新版をダウンロードして解凍してVimのディレクトリにインストールするだけです。</p>

<h1>メリット</h1>

<ul>
<li>sshのリモートホスト先で日本語入力ができない時もVim上で日本語を入力できる</li>
<li>軽い</li>
<li>自分の意図にあった変換をしてくれる(かもしれない)</li>
</ul>

<h1>デメリット</h1>

<ul>
<li>他のInput Methodには戻れない</li>
<li>SKK信者で<del>Vim信者</del>Vimmerは母数的に考えて少ない(要出典)</li>
</ul>

<p>・・・はネタとして</p>

<ul>
<li>Vimでしか使えない</li>
</ul>

<p>MacならAquaSKK、Windowsならskkime、Linuxならuim-skkやscim-skkなど、<br />
それぞれのOSのIMを変えてしまえばどのアプリケーションでも使えます。
ただ上で言った「sshのリモートホスト先で日本語入力ができない時もVim上で日本語を入力できる」は大きなメリットだと思います。<br />
緊急時に備えてインストールしておくのもアリかもしれません。</p>

<ul>
<li>SKKは人によっては慣れが必要かもしれない</li>
</ul>

<p>SKKでもmecab-skkservというものを使えば普通の日本語入力と似た環境を手に入れられますが、残念ながらskk.vimはskkserv非対応です。</p>

<h1>これまでのあらすじ</h1>

<p>しかしskk.vimには一つ問題があり、
それはもう作者によるメンテナンスが行われていないことです。<br />
skk.vimにはファンも多く、インターネット上でも野良パッチが散見されますが、<br />
それらは本家にマージされることはなく
www.vim.orgでの最終更新日は2006年10月15日で止まっています。</p>

<p>そんな中私はこの状況をなんとかしたいといった気持ちはまったくなく、<br />
ふとした思いつきからGithubにskk.vimの改良版を登録し、それが一部の人の反響を受けます。(要出典)<br />
気を良くした私は、勢いで作者である八木氏とメールで連絡をし、<br />
ライセンスの確認と、メンテナンスの意志があるか、<br />
また今後作者に無断で登録してしまったリポジトリに継続してコミットしていいかを尋ねました。<br />
八木氏はこれに快く了承して、ライセンスは好きにしていいと仰ってくれました。</p>

<p>無事八木氏の了解が得られ、どんどんskk.vimのパッチをマージしていこうと考えたものの、<br />
skk.vimがVimスクリプトの貧弱な時代に書かれたものだったため、互換性を維持するためのコードが散らばっていました。</p>

<p>ドキュメントはなんとか書いたものの、Vim6時代のコードを知らないために、変更をすることに怖気づいていたところ、<br />
リポジトリのメンバーからもコードを一から書き直す必要があるとの声が高まってきます。<br />
私はそれを喜んで賛成し、skk.vimのメンテナンスを続けることを約束しながらも、結局新しいskk.vimを作ることにしました。</p>

<h1>skk7.vim (仮称)</h1>

<p>新しいskk.vimは、今現在skk7.vimという仮称のもと開発が行われています。<br />
それは今私のマシン上、完璧クローズドな環境で行われていて、<br />
未だベータ版ですが、近々Githubに登録するつもりです。</p>

<p>しかしskk7.vimというのはあくまで仮称であって、正式名称ではありません。<br />
未だ<a href="http://d.hatena.ne.jp/tyru/20100131/list_of_names_of_new_skk_vim">続々と希望が寄せられている</a>ものの、そもそも多数決で決めるのか、独断で決めるのか、それすらも決めていませんでした。</p>

<h1>というわけで</h1>

<ul>
<li>新しい名前希望！

<ul>
<li>決め方は決めるつもり</li>
</ul></li>
<li>skk.vimかskk7.vimの開発に興味があるなら、私かリポジトリのメンバーになんらかのコンタクトをとってくれれば、すぐにメンバーに招待したい

<ul>
<li>GithubのIDを取得している必要があります</li>
<li>参加表明して何もしなくてもOKな気楽っぷり</li>
<li>気が向いた時に機能追加なり修正を新しいブランチにプッシュしてもらえれば適当に拾ってマージします</li>
</ul></li>
<li>その他要望等あれば下の連絡先からどうぞ</li>
</ul>

<h1>連絡先</h1>

<ul>
<li><a href="http://d.hatena.ne.jp/tyru/">はてな</a></li>
<li>tyru.exe@gmail.com</li>
</ul>

<h1>参考リンク</h1>

<ul>
<li><a href="http://github.com/tyru/skk.vim">skk.vimのリポジトリ</a></li>
<li><a href="http://openlab.ring.gr.jp/skk/index-j.html">SKK Openlab</a></li>
</ul>

<address class="hack-author">tyru</address>
