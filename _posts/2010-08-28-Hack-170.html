---
layout: post
title: "Hack #170: テキストを折り畳む &#8211; 基本編"
date: 2010-08-28
author: thinca
---
<p>長いテキストやソースコードを閲覧したり編集する場合、全体の俯瞰が知りたかったり、必要のない部分を無視したいことがあります。
こういった場合、Vim の折り畳み機能が便利です。</p>

<p>本 Hack では何回かに分けて折り畳み機能について解説します。</p>

<h3>Folding (折り畳み)</h3>

<p>Vim にはテキストを折り畳むための Folding と呼ばれる機能があり、これを使うことで複数行を 1 行にまとめて表示することができます。まとめられた行には要約が表示されます。
折り畳み機能を使うことで、テキストをセクション単位や関数単位などで折り畳んで簡潔に表示することができます。</p>

<p><a href="/vim-users-jp/assets/images/folding.png"><img src="/vim-users-jp/assets/images/folding.png" alt="折りたたまれたテキスト" title="folding" width="449" height="186" class="alignnone size-full wp-image-1915" /></a></p>

<p>折り畳まれた行は <kbd>zo</kbd> で開き、 <kbd>zc</kbd> で閉じることができます。詳細は操作編で解説します。</p>

<h3>折り畳みレベル</h3>

<p>折り畳みは入れ子にすることができます。これにより、構造化された文書やソースコードを階層ごとに折り畳むことができます。
各行には折り畳みレベルというものがあり、入れ子は実際にはこれによって表現されています。折り畳みレベル 0 が、折り畳みがない状態です。</p>

<p>階層化された折り畳みは <kbd>zR</kbd> で全て開き、<kbd>zM</kbd> で全て閉じることができます。</p>

<h3>折り畳みの種類</h3>

<p>折り畳みには、以下の 6 つの種類があります。’foldmethod’ オプションに対して以下のいずれかを設定します。</p>

<table>
<thead>
<tr>
<th>値</th>
<th>概要</th>
</tr>
</thead>
<tbody>
<tr>
<td>manual</td>
<td>手動で折り畳みを作成します。</td>
</tr>
<tr>
<td>marker</td>
<td>特定の印により折り畳みを作成します。</td>
</tr>
<tr>
<td>indent</td>
<td>インデントによって折り畳みを作成します。</td>
</tr>
<tr>
<td>expr</td>
<td>式を使って柔軟に折り畳みを作成します。</td>
</tr>
<tr>
<td>syntax</td>
<td>syntax での指定により折り畳みを作成します。</td>
</tr>
<tr>
<td>diff</td>
<td>diff の際に変更されていないテキストを折り畳みます。</td>
</tr>
</tbody>
</table>

<p>‘foldmethod’ オプションはウィンドウローカルなので、同じバッファを別のウィンドウで別の方法で折り畳むこともできます。</p>

<h3>折り畳みの作成と削除</h3>

<p>基本編ということで、最後に折り畳みの作成/削除の方法を簡単に紹介しておきます。</p>

<p>‘foldmethod’ が “manual” の場合、自分で折り畳みを作成することになります。折り畳みの作成は <kbd>zf{motion}</kbd> か Visual-mode で範囲を選択して <kbd>zf</kbd> 、もしくは <code>:{range}fold</code> コマンドで行います。繰り返して実行することで、折り畳みレベルを深くすることができます。</p>

<p><kbd>zd</kbd> でカーソル位置にある折り畳みを削除できます。また、<kbd>zD</kbd> でカーソル位置にある折り畳みを再帰的に全て削除できます。</p>

<address class="hack-author">thinca</address>
