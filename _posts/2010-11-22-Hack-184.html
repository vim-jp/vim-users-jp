---
layout: post
title: "Hack #184: MacVimでCommand-line windowを使いこなす"
date: 2010-11-22
author: 
---
<p><a href="/vim-users-jp/2010/07/14/Hack-161.html">Hack #161: Command-line windowを使いこなす</a>
				という記事を参考に、<code class="lang-vim">0</code>キーに<code>0</code>相当の機能を割り当てた人が相当数いると思います。
				しかし、この設定はMacVim上でうまく動作しません。</p>

<p>MacVimはGUIで動作するVimとして最も評判が悪いものですが、しかしながらMac OS X上で最も高速で動作するVimであり、泣く泣く使用し続ける方も多くいらっしゃることだと思います。(*1)</p>

<p>具体的にはMacVimで<code>0</code>してCommand-line windowを開いた状態で、何か一行だけの結果を出力するコマンドを実行するとします。</p>

<pre class="prettyprint"><code>0</code></pre>

<p>ターミナルのVim、あるいはGVimでは画面下部に1と出力されたままになるのですが、MacVimのみ、何も表示されません。</p>

<pre class="prettyprint"><code>0</code></pre>

<p>などが完全に使えなくなってしまいます。</p>

<h2>解決</h2>

<p>Command-line windowでの<kbd>&lt;Cr&gt;</kbd>キーの挙動を上書きし、(1) 一旦入力コマンドを別のところに保存し、(2) Command-line windowを閉じ、(3) 通常の<code class="lang-vim">0</code>を打鍵、(4) 先ほど入力したコマンドを展開、(5) 実行、という手順をとることにします。</p>

<p>前提として、<a href="/vim-users-jp/2010/07/14/Hack-161.html">Hack #161の設定</a> が既になされているものとします。その上で、以下のコードを<code>0</code>に記述します。</p>

<pre class="prettyprint"><code class="lang-vim">0</code></pre>

<p>なお、他にもいろいろあって、最終的に著者の<code>0</code>のCommand-line window関係の設定は以下のようになっています。</p>

<pre class="prettyprint"><code class="lang-vim">0</code></pre>

<p>MacVim固有のバグ回避コードが入っていますが、MacVim以外のVimでも正常に動作するはずです。</p>

<h2>参考</h2>

<ul>
<li>(*1) <a href="http://h.hatena.ne.jp/ujihisa/9234098453983077319">http://h.hatena.ne.jp/ujihisa/9234098453983077319</a> MacVimの恐るべき数々の罠については、後日おいおい語っていくことにしましょう。</li>
</ul>
