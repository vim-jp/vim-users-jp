---
layout: post
title: "Hack #219: Gitを使う2 &#8211; Fugitive.vim"
date: 2011-06-19
author: Sixeight
---
<p>Vim の中で Git を快適に使うためのプラグインがいつくかあります。 その中から Time Pope さん作の Fugitive.vim を紹介します。</p>

<p>motemen さんの git.vim については <a href="/vim-users-jp/2009/09/hack67/">Hack #67: Gitを使う</a> を参照してください。
				今回の記事は対比のためフォーマットを似せています。</p>

<h2>インストール</h2>

<p>plugin は github から入手可能です。
<a href="https://github.com/tpope/vim-fugitive">https://github.com/tpope/vim-fugitive</a></p>

<p>また Vundle でもインストール可能です。</p>

<p>:BundleInstall tpope/vim-fugitive</p>

<h2>使い方</h2>

<p>以下のコマンドが定義されます。</p>

<ul>
<li>Git arg: git コマンドと同様の機能を有し、自分で定義した alias も使用出来ます。</li>
</ul>

<p>Git コマンドを使用した場合は結果を pager に表示します。
				以下のコマンドを使用すると結果は状況に応じてバッファ内、quickfix list 等に表示されます。
				また、diff を vimdiff で表示したり、blame もハイライトされた状態で表示されたりと、それだけでも利用価値があると筆者は考えます。</p>

<ul>
<li>:Gdiff[ rev]: git diff[ --cached] {編集中のファイル}</li>
<li>:Gstatus: git status</li>
<li>:GlLog[ rev]: git log {編集中のファイル}</li>
<li>:Gwrite: git add {編集中のファイル}</li>
<li>:Gread[ rev]: git checkout {編集中のファイル}</li>
<li>:Gcommit: staged なファイルがあれば git commit なければ git status</li>
<li>:Gblame[ rev]: git blame {編集中のファイル}</li>
</ul>

<p>上記以外にも Git を扱ううえで有用なコマンドが多数定義されます。:help fugitive を参照してください。</p>

<h2>Gstatus 時の挙動について</h2>

<p>:Gstatus を使用すると、Window が split され git status の結果が表示されます。</p>

<p>定義されたいくつかの mapping を利用することで、更に便利になります。</p>

<ul>
<li><CR>: カーソル下にあるファイルを edit</li>
<li>-: カーソル下にあるファイルを git add</li>
<li>p: カーソル下にあるファイルを git add -p</li>
<li>D: カーソル下にあるファイルを git diff[ --cached]</li>
<li>C: git commit</li>
</ul>

<h2>応用</h2>

<p>筆者は以下のように mapping して利用しています。</p>

<pre><code>" for Fugitive \{\{\{
nnoremap &lt;Space&gt;gd :&lt;C-u&gt;Gdiff&lt;Enter&gt;
nnoremap &lt;Space&gt;gs :&lt;C-u&gt;Gstatus&lt;Enter&gt;
nnoremap &lt;Space&gt;gl :&lt;C-u&gt;Glog&lt;Enter&gt;
nnoremap &lt;Space&gt;ga :&lt;C-u&gt;Gwrite&lt;Enter&gt;
nnoremap &lt;Space&gt;gc :&lt;C-u&gt;Gcommit&lt;Enter&gt;
nnoremap &lt;Space&gt;gC :&lt;C-u&gt;Git commit --amend&lt;Enter&gt;
nnoremap &lt;Space&gt;gb :&lt;C-u&gt;Gblame&lt;Enter&gt;
" \}\}\}
</code></pre>

<h2>参照資料</h2>

<ul>
<li><a href="https://github.com/tpope/vim-fugitive">tpope/vim-fugitive</a></li>
</ul>

<address class="hack-author">Sixeight</address>
