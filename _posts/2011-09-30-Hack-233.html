---
layout: post
title: "Hack #233: 現在使用中のColorSchemeの名前を取得する"
date: 2011-09-30
author: ujihisa
---
<p>こんにちは、ujihisaです。今月末に引っ越しをする予定があり、毎日忙しく、Vimを使う暇すらない日々が続いています。</p>

<h2>問題</h2>

<p>美しいColorSchemeを使用しており、それを友達に自慢したいVim使いは多数いると思います。しかしながら、現在使用中のColorSchemeの名前を取得する方法が分からず、はがゆい思いをしたことがある人も少なくないのではないでしょうか。</p>

<h2>解決</h2>

<p>二つの方法があります。</p>

<pre class="prettyprint"><code>:colorscheme
</code></pre>

<p>あるいは</p>

<pre class="prettyprint"><code>:echo g:colors_name
</code></pre>

<p>前者は画面にColorScheme名を表示する専用のコマンド、後者はColorScheme名が入っている変数を得てそれを表示しているわけですので、対話的に使用するときは前者を、Vim scriptから値を使用するときは後者を使うと自然になります。</p>

<h2>注意</h2>

<p>必ずしも上記方法で現在使用中のColorSchemeが得られる<em>とは限りません</em>。ColorScheme開発者には、そのColorScheme名を<code>g:colors_name</code>というグローバル変数に格納することが<em>推奨</em>されていますが、自動的に行われるわけではありません。</p>

<p>上記のような場合、<code>:colorscheme</code>は無条件に<code>default</code>と出力します。また、<code>g:colors_name</code>にアクセスするとエラーを吐き出します。</p>

<p>悪評高いColorSchemeの例として<code>leo</code>があります。<code>:colorscheme leo</code>して<code>:echo g:colors_name</code>ないし<code>:colorscheme</code>して、絶望しましょう。</p>

<p>そして、<a href="https://github.com/vim-jp/issues">パッチを投げましょう。</a></p>

<address class="hack-author">ujihisa</address>
